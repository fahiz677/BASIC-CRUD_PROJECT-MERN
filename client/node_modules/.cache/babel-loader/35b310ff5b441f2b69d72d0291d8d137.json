{"ast":null,"code":"var _jsxFileName = \"/home/fahiz/Brocamp Works/BASIC-CRUD_PROJECT-MERN/client/src/components/Header/Header.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport \"./Header.css\";\nimport useStyles from \"../Header/styles\";\nimport { Typography, Toolbar, Avatar, Button } from '@material-ui/core';\nimport { Link, useLocation, useNavigate } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { logout, reset } from \"../../features/auth/authSlice\";\nimport { toast } from 'react-toastify';\nimport decode from 'jsonwebtoken';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Header = () => {\n  _s();\n\n  var _localStorage;\n\n  // const cartList = useSelector((state) => state.products.products);\n  // const totalCartCount = cartList.reduce((acc, value) => (acc += value.count), 0);\n  const totalCartCount = 0;\n  const [user, setUser] = useState(JSON === null || JSON === void 0 ? void 0 : JSON.parse((_localStorage = localStorage) === null || _localStorage === void 0 ? void 0 : _localStorage.getItem('user')));\n  const Location = useLocation();\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const classes = useStyles();\n  useEffect(() => {\n    var _localStorage2;\n\n    const token = user === null || user === void 0 ? void 0 : user.token;\n\n    if (token) {\n      const decodedToken = decode(token);\n      if (decodedToken.exp * 1000 < new Date().getTime()) logout();\n    }\n\n    setUser(JSON === null || JSON === void 0 ? void 0 : JSON.parse((_localStorage2 = localStorage) === null || _localStorage2 === void 0 ? void 0 : _localStorage2.getItem('user')));\n  }, [Location]);\n\n  const onlogout = () => {\n    dispatch(logout());\n    dispatch(reset());\n    setUser(null);\n    toast.error(\"User LogOut\");\n    navigate('/');\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"header\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"E-Shop\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"right-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cart-count-header\",\n          children: totalCartCount\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 16\n        }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n          width: \"32\",\n          height: \"32\",\n          viewBox: \"0 0 16 16\",\n          cursor: \"pointer\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M15.32 2.405H4.887C3 2.405 2.46.805 2.46.805L2.257.21C2.208.085 2.083 0 1.946 0H.336C.1 0-.064.24.024.46l.644 1.945L3.11 9.767c.047.137.175.23.32.23h8.418l-.493 1.958H3.768l.002.003c-.017 0-.033-.003-.05-.003-1.06 0-1.92.86-1.92 1.92s.86 1.92 1.92 1.92c.99 0 1.805-.75 1.91-1.712l5.55.076c.12.922.91 1.636 1.867 1.636 1.04 0 1.885-.844 1.885-1.885 0-.866-.584-1.593-1.38-1.814l2.423-8.832c.12-.433-.206-.86-.655-.86\",\n            fill: \"#fff\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 16\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Toolbar, {\n        className: classes.toolbar,\n        children: user !== null && user !== void 0 && user.result ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.profile,\n          children: [/*#__PURE__*/_jsxDEV(Avatar, {\n            className: classes.purple,\n            alt: user === null || user === void 0 ? void 0 : user.result.name,\n            src: user === null || user === void 0 ? void 0 : user.result.picture,\n            children: user === null || user === void 0 ? void 0 : user.result.name.charAt(0)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            className: classes.userName,\n            variant: \"h6\",\n            children: user === null || user === void 0 ? void 0 : user.result.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            className: classes.logout,\n            color: \"secondary\",\n            onClick: onlogout,\n            children: \"Logout\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this) : /*#__PURE__*/_jsxDEV(Button, {\n          component: Link,\n          to: \"/auth\",\n          variant: \"contained\",\n          color: \"primary\",\n          children: \"Sign In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 10\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 7\n  }, this);\n};\n\n_s(Header, \"l/HSy1LfoTLbX+Jy+Ela3/qT8xQ=\", false, function () {\n  return [useLocation, useNavigate, useDispatch, useStyles];\n});\n\n_c = Header;\nexport default Header;\n\nvar _c;\n\n$RefreshReg$(_c, \"Header\");","map":{"version":3,"names":["React","useState","useEffect","useStyles","Typography","Toolbar","Avatar","Button","Link","useLocation","useNavigate","useDispatch","logout","reset","toast","decode","Header","totalCartCount","user","setUser","JSON","parse","localStorage","getItem","Location","navigate","dispatch","classes","token","decodedToken","exp","Date","getTime","onlogout","error","toolbar","result","profile","purple","name","picture","charAt","userName"],"sources":["/home/fahiz/Brocamp Works/BASIC-CRUD_PROJECT-MERN/client/src/components/Header/Header.js"],"sourcesContent":["import React,{useState ,useEffect} from \"react\";\nimport \"./Header.css\";\nimport useStyles from \"../Header/styles\";\nimport {  Typography, Toolbar, Avatar, Button } from '@material-ui/core';\nimport { Link , useLocation , useNavigate} from 'react-router-dom';\nimport { useDispatch } from'react-redux';\nimport { logout , reset } from  \"../../features/auth/authSlice\"\nimport { toast } from 'react-toastify'\nimport decode from 'jsonwebtoken'\n\nconst Header = () => {\n   // const cartList = useSelector((state) => state.products.products);\n\n   // const totalCartCount = cartList.reduce((acc, value) => (acc += value.count), 0);\nconst totalCartCount = 0;\n\n\n \nconst [user, setUser] = useState(JSON?.parse(localStorage?.getItem('user')));\nconst Location = useLocation();\nconst navigate = useNavigate();\nconst dispatch = useDispatch();\nconst classes = useStyles();\n\nuseEffect(() => {\n  const token = user?.token;\n\n  if (token) {\n    const decodedToken = decode(token);\n\n    if (decodedToken.exp * 1000 < new Date().getTime()) logout();\n  }\n \n  setUser(JSON?.parse(localStorage?.getItem('user')) );\n\n}, [Location]);\n\n\nconst onlogout = () => {\n  dispatch(logout());\n  \n  dispatch(reset())\n\n  setUser(null);\n toast.error(\"User LogOut\")\n  navigate('/')\n\n};\n\n   return (\n      <header>\n         <div className=\"container\">\n            <h1>E-Shop</h1>\n\n            <div className=\"right-section\">\n               <div className=\"cart-count-header\">{totalCartCount}</div>\n               <svg width=\"32\" height=\"32\" viewBox=\"0 0 16 16\" cursor=\"pointer\">\n                  <path\n                     d=\"M15.32 2.405H4.887C3 2.405 2.46.805 2.46.805L2.257.21C2.208.085 2.083 0 1.946 0H.336C.1 0-.064.24.024.46l.644 1.945L3.11 9.767c.047.137.175.23.32.23h8.418l-.493 1.958H3.768l.002.003c-.017 0-.033-.003-.05-.003-1.06 0-1.92.86-1.92 1.92s.86 1.92 1.92 1.92c.99 0 1.805-.75 1.91-1.712l5.55.076c.12.922.91 1.636 1.867 1.636 1.04 0 1.885-.844 1.885-1.885 0-.866-.584-1.593-1.38-1.814l2.423-8.832c.12-.433-.206-.86-.655-.86\"\n                     fill=\"#fff\"\n                  ></path>\n               </svg>\n            </div>\n\n            <Toolbar className={classes.toolbar}>\n        {user?.result ? (\n          <div className={classes.profile}>\n            <Avatar className={classes.purple} alt={user?.result.name} src={user?.result.picture}>{user?.result.name.charAt(0)}</Avatar>\n            <Typography className={classes.userName} variant=\"h6\">{user?.result.name}</Typography>\n            <Button variant=\"contained\" className={classes.logout} color=\"secondary\" onClick={onlogout}>Logout</Button>\n          </div>\n        ) : (\n          <Button component={Link} to=\"/auth\" variant=\"contained\" color=\"primary\">Sign In</Button>\n        )}\n      </Toolbar>\n         </div>\n      </header>\n   );\n};\n\nexport default Header;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}